{"version":3,"sources":["webpack:///src/pages/web/Cart.vue","webpack:///./src/pages/web/Cart.vue?b8ae","webpack:///./src/pages/web/Cart.vue"],"names":["Cart","computed","extends_default","Object","vuex_esm","data","allSelect","totalGoods","totalMoney","totalNum","created","this","getCart","methods","_this","$api","getShopingCart","getUserInfo","then","res","resData","map","item","isCheck","setShopingCart","catch","err","console","log","selectAll","val","selectGood","_this2","filter","price","num","length","updateCart","index","_this3","$utils","throttle","orderSn","type","unitPrice","toPlay","$Notice","info","title","$router","push","web_Cart","render","_vm","_h","$createElement","_c","_self","attrs","isOther","_v","staticClass","span","checked","on","update:checked","$event","on-change","model","value","callback","$$v","expression","offset","_l","key","$set","src","goodsImg","alt","_s","goodsName","max","min","class","disable","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/6.d9cd528b6562ed64ecc3.js","sourcesContent":["<template>\r\n  <div>\r\n    <v-header :isOther=\"true\" />\r\n    <div class=\"web\">\r\n      <Row class=\"cart-header\">\r\n        <Col span=\"2\">\r\n          <Checkbox :checked.sync=\"allSelect\" v-model=\"allSelect\" @on-change=\"selectAll\">全选</Checkbox>\r\n        </Col>\r\n        <Col span=\"4\" offset=\"2\">商品</Col>\r\n        <Col span=\"3\" offset=\"2\">数量</Col>\r\n        <Col span=\"3\" offset=\"2\">单价（元）</Col>\r\n        <Col span=\"4\" offset=\"2\">金额（元）</Col>\r\n      </Row>\r\n      <Row class=\"goods-box\" v-for=\"(item, index) in getShopingCart\" :key=\"index\">\r\n        <Col span=\"1\">\r\n          <Checkbox v-model=\"item.isCheck\" @on-change=\"selectGood\"></Checkbox>\r\n        </Col>\r\n        <Col span=\"4\" class=\"img-box\">\r\n          <img :src=\"item.goodsImg\" alt />\r\n        </Col>\r\n        <Col span=\"2\">{{item.goodsName}}</Col>\r\n        <Col span=\"5\" offset=\"2\">\r\n          <InputNumber :max=\"100\" :min=\"1\" v-model=\"item.num\" @on-change=\"updateCart(item, index)\"></InputNumber>\r\n        </Col>\r\n        <Col span=\"5\">\r\n          <p>{{item.unitPrice}}</p>\r\n        </Col>\r\n        <Col span=\"4\" offset=\"1\">{{item.price}}</Col>\r\n      </Row>\r\n      <Row class=\"cart-header\">\r\n        <Col span=\"3\" offset=\"1\">删除选中的商品</Col>\r\n        <Col span=\"6\">\r\n          已选商品：\r\n          <span class=\"redColor\">{{totalGoods}}</span>种\r\n        </Col>\r\n        <Col span=\"4\">\r\n          数量总计：\r\n          <span class=\"redColor\">{{totalNum}}</span>件\r\n        </Col>\r\n        <Col span=\"7\">\r\n          总计（不含运费）：\r\n          <span class=\"redColor\">{{totalMoney}}</span>元\r\n        </Col>\r\n        <Col span=\"3\">\r\n          <span :class=\"['play-btn',{disable: !!!totalGoods}]\" @click=\"toPlay\">结算</span>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <v-footer />\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nexport default {\r\n  computed: {\r\n    ...mapGetters([\"getUserInfo\", \"getShopingCart\"])\r\n  },\r\n  data() {\r\n    return {\r\n      allSelect: false,\r\n      totalGoods: 0, //已选商品总量\r\n      totalMoney: 0, //总金额\r\n      totalNum: 0 //总件数\r\n    };\r\n  },\r\n  created() {\r\n    this.getCart();\r\n  },\r\n  methods: {\r\n    ...mapActions([\"setShopingCart\"]),\r\n    // 获取购物车\r\n    getCart() {\r\n      this.$api\r\n        .getShopingCart(this.getUserInfo)\r\n        .then(res => {\r\n          let resData = res.data.data.map(item => {\r\n            item.isCheck = false;\r\n            return item;\r\n          });\r\n          this.setShopingCart(resData);\r\n        })\r\n        .catch(err => console.log(err));\r\n    },\r\n    // 全选\r\n    selectAll(val) {\r\n      this.getShopingCart.map(item => (item.isCheck = val));\r\n      this.selectGood();\r\n    },\r\n    // 选择商品\r\n    selectGood() {\r\n      this.totalMoney = 0;\r\n      this.totalNum = 0;\r\n      this.totalGoods = 0;\r\n      this.getShopingCart.filter(item => {\r\n        if (item.isCheck) {\r\n          this.totalMoney += item.price * 1;\r\n          this.totalNum += item.num * 1;\r\n          this.totalGoods += 1;\r\n        }\r\n      });\r\n      this.allSelect = !!(this.totalGoods == this.getShopingCart.length);\r\n    },\r\n    // 更新购物车 ps: 更新: type=0,删除: type=-1\r\n    updateCart(item, index) {\r\n      this.$utils.throttle(() => {\r\n        this.$api\r\n          .updateCart({\r\n            orderSn: item.orderSn,\r\n            num: item.num,\r\n            type: 0\r\n          })\r\n          .then(res => {\r\n            let resData = res.data.data[0];\r\n            item.unitPrice = resData.unitPrice;\r\n            item.price = resData.price;\r\n            // this.setShopingCart(this.getShopingCart);\r\n          })\r\n          .catch(err => console.log(err));\r\n      }, 500);\r\n    },\r\n    //结算\r\n    toPlay() {\r\n      if (!this.totalGoods)\r\n        return this.$Notice.info({ title: \"请选择要购买的商品\" });\r\n      this.setShopingCart(this.getShopingCart);\r\n      this.$router.push(\"/web/play\");\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import \"~@/less/theme.less\";\r\n.cart-header {\r\n  margin: 10px 0;\r\n  line-height: 60px;\r\n  background-color: @grayBg;\r\n  text-align: center;\r\n  .play-btn {\r\n    display: block;\r\n    width: 100%;\r\n    height: 60px;\r\n    background-color: @themeColor;\r\n    color: #fff;\r\n    font-size: 24px;\r\n    cursor: pointer;\r\n    &.disable {\r\n      background: @borderColor;\r\n    }\r\n  }\r\n}\r\n.goods-box {\r\n  text-align: center;\r\n  padding: 10px;\r\n  margin: 20px 0;\r\n  border: 1px solid @borderColor;\r\n  border-bottom-width: 20px;\r\n  .img-box {\r\n    img {\r\n      display: block;\r\n      width: 80px;\r\n      height: 80px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/web/Cart.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-header',{attrs:{\"isOther\":true}}),_vm._v(\" \"),_c('div',{staticClass:\"web\"},[_c('Row',{staticClass:\"cart-header\"},[_c('Col',{attrs:{\"span\":\"2\"}},[_c('Checkbox',{attrs:{\"checked\":_vm.allSelect},on:{\"update:checked\":function($event){_vm.allSelect=$event},\"on-change\":_vm.selectAll},model:{value:(_vm.allSelect),callback:function ($$v) {_vm.allSelect=$$v},expression:\"allSelect\"}},[_vm._v(\"全选\")])],1),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"4\",\"offset\":\"2\"}},[_vm._v(\"商品\")]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"3\",\"offset\":\"2\"}},[_vm._v(\"数量\")]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"3\",\"offset\":\"2\"}},[_vm._v(\"单价（元）\")]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"4\",\"offset\":\"2\"}},[_vm._v(\"金额（元）\")])],1),_vm._v(\" \"),_vm._l((_vm.getShopingCart),function(item,index){return _c('Row',{key:index,staticClass:\"goods-box\"},[_c('Col',{attrs:{\"span\":\"1\"}},[_c('Checkbox',{on:{\"on-change\":_vm.selectGood},model:{value:(item.isCheck),callback:function ($$v) {_vm.$set(item, \"isCheck\", $$v)},expression:\"item.isCheck\"}})],1),_vm._v(\" \"),_c('Col',{staticClass:\"img-box\",attrs:{\"span\":\"4\"}},[_c('img',{attrs:{\"src\":item.goodsImg,\"alt\":\"\"}})]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"2\"}},[_vm._v(_vm._s(item.goodsName))]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"5\",\"offset\":\"2\"}},[_c('InputNumber',{attrs:{\"max\":100,\"min\":1},on:{\"on-change\":function($event){return _vm.updateCart(item, index)}},model:{value:(item.num),callback:function ($$v) {_vm.$set(item, \"num\", $$v)},expression:\"item.num\"}})],1),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"5\"}},[_c('p',[_vm._v(_vm._s(item.unitPrice))])]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"4\",\"offset\":\"1\"}},[_vm._v(_vm._s(item.price))])],1)}),_vm._v(\" \"),_c('Row',{staticClass:\"cart-header\"},[_c('Col',{attrs:{\"span\":\"3\",\"offset\":\"1\"}},[_vm._v(\"删除选中的商品\")]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"6\"}},[_vm._v(\"\\n        已选商品：\\n        \"),_c('span',{staticClass:\"redColor\"},[_vm._v(_vm._s(_vm.totalGoods))]),_vm._v(\"种\\n      \")]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"4\"}},[_vm._v(\"\\n        数量总计：\\n        \"),_c('span',{staticClass:\"redColor\"},[_vm._v(_vm._s(_vm.totalNum))]),_vm._v(\"件\\n      \")]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"7\"}},[_vm._v(\"\\n        总计（不含运费）：\\n        \"),_c('span',{staticClass:\"redColor\"},[_vm._v(_vm._s(_vm.totalMoney))]),_vm._v(\"元\\n      \")]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"3\"}},[_c('span',{class:['play-btn',{disable: !!!_vm.totalGoods}],on:{\"click\":_vm.toPlay}},[_vm._v(\"结算\")])])],1)],2),_vm._v(\" \"),_c('v-footer')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-c1f8c22c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/web/Cart.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c1f8c22c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true,\\\"javascriptEnabled\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./Cart.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Cart.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Cart.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c1f8c22c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Cart.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c1f8c22c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/web/Cart.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}